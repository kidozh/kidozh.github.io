<!DOCTYPE html>




<html class="theme-next pisces" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="kidozh的一些想法和随手笔记">
<meta property="og:type" content="website">
<meta property="og:title" content="kidozh">
<meta property="og:url" content="https://kidozh.github.io/page/4/index.html">
<meta property="og:site_name" content="kidozh">
<meta property="og:description" content="kidozh的一些想法和随手笔记">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="kidozh">
<meta name="twitter:description" content="kidozh的一些想法和随手笔记">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":true,"scrollpercent":true,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: false,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://kidozh.github.io/page/4/"/>





  <title>kidozh</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">kidozh</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">某不科学的kidozh</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kidozh.github.io/2016/11/03/wordpress-e4-b8-bb-e9-a2-98-e6-a8-a1-e6-9d-bf-e5-92-8c-e7-9b-ae-e5-bd-95-e7-bb-93-e6-9e-84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kido zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kidozh">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/03/wordpress-e4-b8-bb-e9-a2-98-e6-a8-a1-e6-9d-bf-e5-92-8c-e7-9b-ae-e5-bd-95-e7-bb-93-e6-9e-84/" itemprop="url">WordPress主题模板和目录结构</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-03T07:29:30+08:00">
                2016-11-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/网页/" itemprop="url" rel="index">
                    <span itemprop="name">网页</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>对于WordPress而言，WordPress主题可能只需要一个<code>index.php</code>模板和一个<code>style.css</code>的文件。但是大多数的WordPress主题还是需要一些更为坚实的东西。</p>
<h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h1><p>让我们创建一些文件和目录来装饰我们基于<code>_s</code>的主题，shape。</p>
<p>在wp-content/themes/目录下创建你的主题，在这个指南中，我们称之为shape。当然，这也可以是你想要的任何文件，接下来我们将会创建下面的空白文件和文件夹。</p>
<ul>
<li>inc (folder)</li>
<li>js (folder)</li>
<li>languages (folder)</li>
<li>layouts (folder)</li>
<li>404.php</li>
<li>archive.php</li>
<li>comments.php</li>
<li>content.php</li>
<li>content-aside.php</li>
<li>content-page.php</li>
<li>content-single.php</li>
<li>footer.php</li>
<li>functions.php</li>
<li>header.php</li>
<li>index.php</li>
<li>no-results.php</li>
<li>page.php</li>
<li>search.php</li>
<li>searchform.php</li>
<li>sidebar.php</li>
<li>single.php</li>
<li>license.txt</li>
<li>rtl.css</li>
<li>style.css</li>
</ul>
<p>现在让我们在文本编辑器里打开我们创建的最后的文件<code>style.css</code>。我们需要做的第一件事情就是在CSS文件的头几行内加入CSS注释（以<code>/* */</code>开头和结尾）。在这里，我们将会把一些信息写入CSS文件中，这些信息将会告知WordPress你的主题。没有这个，你的主题将不会在主题栏之中显示。</p>
<p>我将会使用Shape作为主题名称，但是你想用啥名字都无所谓。同时，你需要填入author（作者），URLs（地址栏）和你的主题的说明信息。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">Theme Name: Shape</div><div class="line">Theme URI: https://themeshaper.com/</div><div class="line">Author: ThemeShaper</div><div class="line">Author URI: https://themeshaper.com/</div><div class="line">Description: The Shape theme is a simple, minimalist theme based on Underscores and the original Shape Theme by Ian Stewart. It was created especially as a learning theme for The ThemeShaper WordPress Theme Tutorial: 2nd Edition.</div><div class="line">Version: 2.0</div><div class="line">License: GNU General Public License</div><div class="line">License URI: license.txt</div><div class="line">Tags: light, white, one-column, two-columns, left-sidebar, right-sidebar, flexible-width, custom-backgroud, custom-header, custom-menu, featured-images, flexible-header, microformats, post-formats, rtl-language-support, threaded-comments, translation-ready</div><div class="line">This theme, like WordPress, is licensed under the GPL.</div><div class="line">Use it to make something cool, have fun, and share what you've learned with others.</div><div class="line">*/</div></pre></td></tr></table></figure>
<p>让我们挨个看这些元素，这样你就会知道他们在说什么了。</p>
<ul>
<li>Theme Name - 你的主题名称</li>
<li>Theme URL - 你主题主页在网络中的地址。这可以是你网站的某一部分。举个例子，许多的主题作者都可能使用类似于这样的地址：<a href="http://yourgroovydomain.com/your-theme/&amp;#8221" target="_blank" rel="external">http://yourgroovydomain.com/your-theme/&amp;#8221</a></li>
<li>Author - 自我说明，当然也就是你的名字咯</li>
<li>Author URL - 连接到你的网站</li>
<li>Description - 提供一个你主题的简短而清晰的说明，你可以用几句话总结你创建主题的目的以及主题的特性。当用户搜索主题的时候，这个说明将会出现在用户的仪表盘（Dashboard）之中，当然也有可能出现在WordPress.org免费主题库之中</li>
<li>Version - 你主题的版本号。这取决于你是如何对你的版本进行编号，倘若主题是全新的，你也可以从1.0开始命名主题版本号。如果你已经释出了更新，你就能够相应的更改版本号。</li>
<li>License - 你的主题协议。如果你想发布你的主题，你就必须要使用GPL协议了，这也正是WordPress使用的。</li>
<li>License URL - 提供一个用户能找到协议文本的链接。我们的主题将会包含一个<code>license.txt</code>文件，这个文件我们将会在如何分发WordPress主题那一节上提到</li>
<li>Tags - 这些文字（标签）将会描述你主题的特性，颜色和主题。如果你想分发你的主题的话，他们就是必要的。这些标签允许人们去按照颜色主题等来检索主题。<a href="http://wordpress.org/extend/themes/about/" target="_blank" rel="external">这里是一些支持的标签</a>。</li>
</ul>
<p>需要注意的事情：这些东西很多都是可选的。事实上，你只需要主题名称就够了。但是一旦你计划要发布你的主题或者你想为某个人做一个自定义的注意的话，你就需要包含上面的东西了。最后，我希望你不要对这些琐事感到一头雾水。</p>
<p>一旦你做到这些之后，你就可以激活你的注意并且访问你的测试站点了。我们已经完成了我们的空主题了。事情将会开始变得有趣。</p>
<h1 id="构建你的HTML结构"><a href="#构建你的HTML结构" class="headerlink" title="构建你的HTML结构"></a>构建你的HTML结构</h1><p>现在我们将会从前面的教程中使用我们的HTML结构。但是让我们还是学一点关于WordPress和模板的东西吧。</p>
<p>WordPress真的只需要一个模板文件，<code>index.php</code>。我们能够并且将会针对一些特殊的场合使用一系列模板文件（单个文章，归档，页面等）而不是<code>index.php</code>。但是在最开始，<code>index.php</code>才是我们所需要的。</p>
<p>现在，<code>index.php</code>和所有相关的文件都构成了我们在浏览器看到的种种。他们是由一些HTML和PHP渲染而成的。</p>
<p>让我们想想一些类似小说的网页，其包含了开头中间和结尾。当我们写入我们的index.php文件的时候（接下来就是我们的<code>single.php</code>，<code>category.php</code>等文件），我们将只会留心与中间的部分。但是我们将会直接引用开头和结尾的那一部分。我们可能需要复写我们的中间部分因为我们只想一次性的搞定开头和结尾的网页页面。</p>
<h2 id="Header-php和Footer-php"><a href="#Header-php和Footer-php" class="headerlink" title="Header.php和Footer.php"></a>Header.php和Footer.php</h2><p>在我们之前的创建的HTML结构查看并且把所有的代码粘贴到这里并且在<code>header.php</code>之中应该包含<code>&lt;div id=&quot;main&quot;&gt;</code>。它看起来应该像这样：</p>
<figure class="highlight xhtml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"page"</span> <span class="attr">class</span>=<span class="string">"hfeed site"</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">header</span> <span class="attr">id</span>=<span class="string">"masthead"</span> <span class="attr">class</span>=<span class="string">"site-header"</span> <span class="attr">role</span>=<span class="string">"banner"</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">hgroup</span>&gt;</span><span class="tag">&lt;/<span class="name">hgroup</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">nav</span> <span class="attr">role</span>=<span class="string">"navigation"</span> <span class="attr">class</span>=<span class="string">"site-navigation main-navigation"</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span><span class="comment">&lt;!-- .site-navigation .main-navigation --&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">header</span>&gt;</span><span class="comment">&lt;!-- #masthead .site-header --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"main"</span> <span class="attr">class</span>=<span class="string">"site-main"</span>&gt;</span></div></pre></td></tr></table></figure>
<p>现在在后面复制所有事情，包含&lt;!– #main –&gt;在<code>footer.php</code>之中，它看起来可能是这样：</p>
<figure class="highlight xhtml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- #main .site-main --&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">footer</span> <span class="attr">id</span>=<span class="string">"colophon"</span> <span class="attr">class</span>=<span class="string">"site-footer"</span> <span class="attr">role</span>=<span class="string">"contentinfo"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"site-info"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- .site-info --&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">footer</span>&gt;</span><span class="comment">&lt;!-- #colophon .site-footer --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- #page .hfeed .site --&gt;</span></div></pre></td></tr></table></figure>
<h2 id="sidebar-php"><a href="#sidebar-php" class="headerlink" title="sidebar.php"></a>sidebar.php</h2><p>把下面的代码复制到<code>sidebar.php</code>之中：</p>
<figure class="highlight xhtml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"secondary"</span> <span class="attr">class</span>=<span class="string">"widget-area"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- #secondary .widget-area --&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"tertiary"</span> <span class="attr">class</span>=<span class="string">"widget-area"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- #tertiary .widget-area --&gt;</span></div></pre></td></tr></table></figure>
<h2 id="index-php"><a href="#index-php" class="headerlink" title="index.php"></a>index.php</h2><p>我猜你们已经知道我们要做什么了。把下面的代码复制到#main div 之中而在#primary 闭合之前，那么差不多看成这样：</p>
<figure class="highlight xhtml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"primary"</span> <span class="attr">class</span>=<span class="string">"content-area"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span> <span class="attr">class</span>=<span class="string">"site-content"</span> <span class="attr">role</span>=<span class="string">"main"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- #content .site-content --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- #primary .content-area --&gt;</span></div></pre></td></tr></table></figure>
<p>只需要两个很小几部，我们就会有一个完美的WordPress主题。我们需要在<code>header</code>，<code>sidebar</code>和<code>footer</code>之中调用这些函数。</p>
<p>在<code>index.php</code>的页首，我们需要添加模板标签：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span> get_header(); <span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>很好！那么在页尾，我们需要添加</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span> get_sidebar(); <span class="meta">?&gt;</span></div><div class="line"><span class="meta">&lt;?php</span> get_footer(); <span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>是的，现在我们就能够看到WordPress的主要文件index.php了。其有在页首调用了开始页，而在页尾也会调用函数。</p>
<p>重新加载页面并且检出代码，这样就是你的代码了！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kidozh.github.io/2016/10/30/e5-88-9b-e5-bb-ba-e4-b8-80-e4-b8-aawordpress-e7-9a-84-e4-b8-bb-e9-a2-98html-e7-bb-93-e6-9e-84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kido zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kidozh">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/30/e5-88-9b-e5-bb-ba-e4-b8-80-e4-b8-aawordpress-e7-9a-84-e4-b8-bb-e9-a2-98html-e7-bb-93-e6-9e-84/" itemprop="url">创建一个WordPress的主题HTML结构</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-30T01:09:47+08:00">
                2016-10-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/网页/" itemprop="url" rel="index">
                    <span itemprop="name">网页</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>现在我们着手进入到WordPress的真正开发阶段：开始编写HTML结构</p>
<h1 id="建立HTML结构的目的"><a href="#建立HTML结构的目的" class="headerlink" title="建立HTML结构的目的"></a>建立HTML结构的目的</h1><p>当我们编写一个网站的时候，你一定会有两个目标：使代码精简并且有意义。这样就是说，尽可能使用少的标记（也就是HTML的标签）并且保证使用类和ID名称使得标记有意义。举个例子，对于小工具栏，你应该使用<code>class=”widget-area”</code> 而不是 <code>class=”sidebar-left”</code>。</p>
<p>现在当我们编写一个WordPress的主题（或者任何针对内容管理系统的模板）的时候，我们需要找到一种介于精简代码和我们称之为<a href="http://www.456bereastreet.com/lab/web_development_mistakes/" target="_blank" rel="external">冗余</a>的东西。代码里包含了很多不必要的<code>div</code>元素。换句话说，有很多冗余结构。你可能在浏览网页或者WordPress的主题的源代码时候见过div。你可以把他们作为HTML代码的一个容器 - 这个容器对于使用CSS来操作HTML代码来说很方便。当然我们也会有一些，但是我们不会想要太多的以及没有意义的标签。</p>
<p>有一些诸如<code>header</code>、<code>nav</code>和<code>footer</code>的标签，HTML5已经使得我们对于有意义的布局的请求变得更为简单。这些信的主题和div标签很相似，并且这些标签能够作为HTML代码的容器。同样的，他们也能够允许我们创造一个更能描述HTML大纲的框架。</p>
<p>所以我们已经有很好的框架了，使用在HTML5新的标签，这样我们能够针对我们的博客和站点布局来进行代码复用。</p>
<h1 id="针对WordPress主题的HTML结构"><a href="#针对WordPress主题的HTML结构" class="headerlink" title="针对WordPress主题的HTML结构"></a>针对WordPress主题的HTML结构</h1><p>让我们看一看我们将会使用在WordPress主题主体的HTML结构。</p>
<figure class="highlight xhtml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"page"</span> <span class="attr">class</span>=<span class="string">"hfeed site"</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">header</span> <span class="attr">id</span>=<span class="string">"masthead"</span> <span class="attr">class</span>=<span class="string">"site-header"</span> <span class="attr">role</span>=<span class="string">"banner"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">hgroup</span>&gt;</span><span class="tag">&lt;/<span class="name">hgroup</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">nav</span> <span class="attr">role</span>=<span class="string">"navigation"</span> <span class="attr">class</span>=<span class="string">"site-navigation main-navigation"</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span><span class="comment">&lt;!-- .site-navigation .main-navigation --&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">header</span>&gt;</span><span class="comment">&lt;!-- #masthead .site-header --&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"main"</span> <span class="attr">class</span>=<span class="string">"site-main"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"primary"</span> <span class="attr">class</span>=<span class="string">"content-area"</span>&gt;</span></div><div class="line">               <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span> <span class="attr">class</span>=<span class="string">"site-content"</span>&gt;</span></div><div class="line">               <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- #content .site-content --&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          <span class="comment">&lt;!-- #primary .content-area --&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"secondary"</span> <span class="attr">class</span>=<span class="string">"widget-area"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- #secondary .widget-area --&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"tertiary"</span> <span class="attr">class</span>=<span class="string">"widget-area"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- #tertiary .widget-area --&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">     <span class="comment">&lt;!-- #main .site-main --&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">footer</span> <span class="attr">id</span>=<span class="string">"colophon"</span> <span class="attr">class</span>=<span class="string">"site-footer"</span> <span class="attr">role</span>=<span class="string">"contentinfo"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"site-info"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- .site-info --&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">footer</span>&gt;</span><span class="comment">&lt;!-- #colophon .site-footer --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="comment">&lt;!-- #page .hfeed .site --&gt;</span></div></pre></td></tr></table></figure>
<p>事实上，这个HTML组成了_s的脊梁。继续把这个粘到你的文本编辑器并且把他存到一个顺手的地方，当我们勾践文件结构的时候，我们将会稍后使用到它。但是在这之前，我们还是要看一些事情。</p>
<h1 id="WordPress主题HTML快速的预览"><a href="#WordPress主题HTML快速的预览" class="headerlink" title="WordPress主题HTML快速的预览"></a>WordPress主题HTML快速的预览</h1><p>[caption id=”attachment_1390” align=”aligncenter” width=”768”]<img src="/wp-content/uploads/2016/10/html-visual1.png" alt="一个HTML的样例，点击获得大尺寸图片"> 一个HTML的样例，点击获得大尺寸图片[/caption]</p>
<p>看一下上面的HTML结构。块的颜色越深，也就代表其布局也越深。这些块的布局是由CSS所大致决定的，这些内容我们在后面会提到。</p>
<p>你也可以编辑HTML结构来满足你的需要。举个例子，你可以把导航（navigation）块移出<code>header</code>块或者把小工具（widget）块放进页脚（footer）块。根据这个指南的入门，我们将会使用CSS来安排我们的内容和小工具界面。</p>
<p>那么现在我们就开始写一点代码吧。</p>
<p>首先，在内容页的类，<code>hfeed</code>，<code>hfeed</code>是hatom Microformat schema的一部分。用简单的英语来说，就是告诉计算机来阅读这个内容（比如搜索引擎的爬虫或者其他服务都会通过这个来访问）。</p>
<p>看下文件结构中的<code>header</code>和<code>footer</code>的，你可能已经注意到了HTML5的新特征<code>header</code>和<code>footer</code>。这些标签描述了文件的广义小节。通过借用这些类名称，我将会向标记中添加更多的信息。</p>
<p>你将会发现了在HTML标签中的<code>ARIA</code>  <code>role</code>这个属性。这个role属性能够帮助一些残障辅助工具也来浏览你的站点。你可以在这里获得更多这一点的信息。</p>
<p>在我们HTML的主要区域中，注意一下我们的小工具块是在内容块之后的。你也许发现了我们的内容是在一个容器div（类名为‘content-area ’）这就是关键。它不仅让我们的主要内容在搜索引擎优先发现，而且使用CSS的时候也能精简CSS代码。</p>
<p>这个HTML的结构将会是你WordPress的未来框架，并且也会告诉你怎么使用CSS和这个强大的功能所搭配。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kidozh.github.io/2016/10/21/e4-b8-bb-e9-a2-98-e5-bc-80-e5-8f-91-e5-b7-a5-e5-85-b7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kido zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kidozh">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/21/e4-b8-bb-e9-a2-98-e5-bc-80-e5-8f-91-e5-b7-a5-e5-85-b7/" itemprop="url">主题开发工具</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-21T05:58:41+08:00">
                2016-10-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/网页/" itemprop="url" rel="index">
                    <span itemprop="name">网页</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在我们开始开发wordpress主题之前，我们也需要把我们的工具带到位。在这一片博文中，我们将使用最好最强大的跨平台编译工具。</p>
<h1 id="本地开发工具XAMPP或者MAPP"><a href="#本地开发工具XAMPP或者MAPP" class="headerlink" title="本地开发工具XAMPP或者MAPP"></a>本地开发工具XAMPP或者MAPP</h1><p>开发wordpress最好的地方并不是在服务器上，而是在本地环境里。为了做到这个，你需要把你的电脑变成一个本地的服务器，特别是要把主题移植到一个常见的网页服务器（Apache、MySQL和PHP），这也意味着你可以在你的电脑上安装WordPress。</p>
<p>分开安装这些程序在技术上是一个很大的挑战，但是有些程序仍能够帮助我们安装并且管理他们。</p>
<p>如果你是Windows用户，你就可以试试<a href="http://www.apachefriends.org/en/xampp-windows.html" target="_blank" rel="external">XAMPP</a>。</p>
<p>如果你运行的是Mac，你就需要下载<a href="http://www.mamp.info/en/index.html" target="_blank" rel="external">MAPP</a>。</p>
<p>如果你是Linux用户，用命令行把骚年。</p>
<h1 id="在远程服务器上开发代码"><a href="#在远程服务器上开发代码" class="headerlink" title="在远程服务器上开发代码"></a>在远程服务器上开发代码</h1><p>如果你想在远程服务器上开发主题的话（比如HostGator、Blue Host），你就需要使用FTP客户端来访问站点，对于更多关于FTP的客户端，你也可以在<a href="http://codex.wordpress.org/FTP_Clients" target="_blank" rel="external">Codex page</a>上看到更多信息。</p>
<p>如果你没有一个FTP的客户端，你就需要安装一个，这里有一些免费的工具：</p>
<ul>
<li>CyberDuck - 针对Mac和Windows</li>
<li>FileZilla - 针对Mac，PC和Linux</li>
</ul>
<p>在你下载并且安装了FTP客户端之后，你就需要通过它来连接到你的网站。你可以通过查看你选择的客户端文档来知道如何做到。</p>
<p>一旦你连接到了你的站点，你就可以安装WordPress了。</p>
<h1 id="虚拟内容"><a href="#虚拟内容" class="headerlink" title="虚拟内容"></a>虚拟内容</h1><p>你的WordPress的安装需要一些样本，有些还可能是虚构的。在你的WordPress的后台中，在<strong>工具 &gt; 导入</strong>中选择<strong>从wordpress中导入</strong>。现在我们只需要<code>WXR</code>格式的博文数据来导入。</p>
<h2 id="现在有一些你可以用的选项"><a href="#现在有一些你可以用的选项" class="headerlink" title="现在有一些你可以用的选项"></a>现在有一些你可以用的选项</h2><ul>
<li><a href="http://codex.wordpress.org/Theme_Unit_Test" target="_blank" rel="external">The Theme Unit Test data</a></li>
<li><a href="http://wpcandy.com/articles/easier-theme-development-with-the-sample-post-collection.html" target="_blank" rel="external">WPCandy Sample Content</a></li>
</ul>
<p>每一个测试数据集都有他们的发布的信息。我喜欢干的一件事情就是尽可能导入所有的虚拟文件。这样就不会丢失任何信息。当你想你怎么做的时候，你就可以使用博文导航来浏览每一个博文。你可以检出按照年月或者目录排序的历史记录。有着稳健的虚拟内容的支撑，当有些东西没考虑到的话，我们也可以轻易发现。</p>
<h2 id="添加一些真实的内容"><a href="#添加一些真实的内容" class="headerlink" title="添加一些真实的内容"></a>添加一些真实的内容</h2><p>除了虚拟的内容，添加一些真实的内容也是很机智的。事实上，动态内容并不只是Lorem Ipsum和Little Blind Text的重复显示。从来自一个真实的博客和计算机中的文档中获得信息并且从中创建一些博文都是很必要的。一个真实的内容将会渲染一个非常精准的内容，内容将会显示主题在实际环境中是怎么起作用的（如果你想知道相关的信息，你可以看这一片文章 <a href="https://themeshaper.com/2012/02/27/dont-let-lorem-ipsum-decide-the-fonts-used-in-your-wordpress-themes/" target="_blank" rel="external">Don’t let Lorem Ipsum decide the fonts used in your WordPress Themes</a>）。</p>
<h1 id="开发指导"><a href="#开发指导" class="headerlink" title="开发指导"></a>开发指导</h1><p>如果你对当前主题开发感兴趣，<a href="http://codex.wordpress.org/Theme_Review" target="_blank" rel="external">主题检查指导</a>也是一个非常好的起点。</p>
<h1 id="必要的插件"><a href="#必要的插件" class="headerlink" title="必要的插件"></a>必要的插件</h1><p>如果你想获得开发插件的副本的话，你可以到<a href="http://automattic.com/" target="_blank" rel="external">Automattic</a>中获得进一步情况。在激活之后，他会给出成吨的你可以安装的插件来帮助你优化你的WordPress开发环境并且测试你的WordPress主题是否是最佳的代码体验。如果您想获得更多的信息，你就可以查看 <a href="https://themeshaper.com/2012/09/20/developer-plugin-v1-1-optimize-your-theme-development-environment/" title="Developer plugin v1.1: Optimize Your Theme Development Environment" target="_blank" rel="external">our brief overview of the Developer Plugin</a>。</p>
<p>由 <a href="http://wordpress.mfields.org/" target="_blank" rel="external">Michael Fields</a>开发的<a href="https://themeshaper.com/2012/05/15/introducing-the-monster-widget/" title="Introducing the Monster Widget" target="_blank" rel="external">Monster Widget</a>，也是一个对于开发者必备的插件。通过把monster小组件拖拽到你的侧边栏，你就能够一次性测试WordPress的核心小组件了。</p>
<h1 id="文本编辑器"><a href="#文本编辑器" class="headerlink" title="文本编辑器"></a>文本编辑器</h1><p>你不需要任何特殊的针对WordPress主题开发的图形界面，也许一个简陋的文本编辑器也是可以的。当然有总比没有好。</p>
<p>对于Windows来说，你可以尝试<a href="http://notepad-plus.sourceforge.net/uk/site.htm" target="_blank" rel="external">Notepad++</a>。它是个免费而且开源的软件，并且也被<a href="http://lifehacker.com/385929/best-text-editors" target="_blank" rel="external">Lifehacker</a>所推荐的。</p>
<p>对于Mac来说，我推荐<a href="http://www.barebones.com/products/TextWrangler/" target="_blank" rel="external">Text Wrangler</a>。</p>
<p>对于Linux来说，Visual Code Editor也是很好用的。</p>
<h1 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h1><h2 id="Firefox"><a href="#Firefox" class="headerlink" title="Firefox"></a>Firefox</h2><p>自然，你可以使用任何针对网页开发的浏览器，但是我很推荐火狐浏览器。特别是接下来的两个插件，当提到WordPress开发的时候，他们会让你的开发更加简洁。</p>
<p><a href="https://addons.mozilla.org/en-US/firefox/addon/60" target="_blank" rel="external">Web Developer Add-on for Firefox</a>会添加一个工具条，这个工具条会给你提供从禁用CSS样式到验证本地HTML代码的一整套的检查和调试的方案。</p>
<p><a href="https://addons.mozilla.org/en-US/firefox/addon/1843" target="_blank" rel="external">Firebug Add-on for Firefox</a>也是必不可少的。有了Firefox之后，你就可以在浏览器窗口中点击任何元素来获得对应的源代码。你也能够检查每个单独的样式规则。你也可以禁用这个规则来观察效果。你甚至可以添加或者修改规则以便观察实时变化。</p>
<p>Firefox 10+将会有一个类似firebug的内建的网页探测器。他也能够在浏览器窗口中点击任何元素来获得对应的源代码。这个网页探测器，虽然好用，但是终究不能替代Firebug的特性和功能。</p>
<h2 id="Safari和Chrome"><a href="#Safari和Chrome" class="headerlink" title="Safari和Chrome"></a>Safari和Chrome</h2><p>如果Firefox不是你的那碗菜，Safari和Google Chrome也是很值得推荐的。这两个浏览器都包含一个类似Firebug的内建开发工具。</p>
<p>这里是<a href="https://developer.apple.com/technologies/safari/developer-tools.html" target="_blank" rel="external">Safari</a>的开发文档，这里则是<a href="http://developers.google.com/chrome-developer-tools/docs/overview" target="_blank" rel="external">Chrome</a>的开发工具文档。</p>
<h1 id="HTML和CSS"><a href="#HTML和CSS" class="headerlink" title="HTML和CSS"></a>HTML和CSS</h1><p>对于HTML和CSS的熟识将会帮助您的WordPress开发。我推荐关于HTML的这两本书。</p>
<ul>
<li><a href="http://htmldog.com/guides/htmlbeginner/" target="_blank" rel="external">HTML Beginner Tutorial</a></li>
<li><a href="http://www.htmldog.com/guides/cssbeginner/" target="_blank" rel="external">CSS Beginner Tutorial</a></li>
</ul>
<p>如果你想快速上手，你就可以看<a href="http://html5doctor.com/element-index/" target="_blank" rel="external"> Element Index from HTML5 Doctor</a>。阅读这些指南是完全可选的，他们对您理解一些基本概念有益无害。</p>
<h2 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h2><p>那PHP呢？你难道不应该知道PHP来创建一个WordPress主题吗？这个答案是肯定的。但是我会告诉你充足的关于WordPress主题的一些雷区。当然这也是不必须的，你所需要的仅仅是学习一些基本的常识。</p>
<h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>这篇博文将会告诉你如何从草图中创建一个强大的WordPress主题，从头开始阅读并且亲自码代码是一件非常美妙的事情。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kidozh.github.io/2016/10/20/e4-b8-bb-e9-a2-98-e6-84-9f/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kido zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kidozh">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/20/e4-b8-bb-e9-a2-98-e6-84-9f/" itemprop="url">主题感</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-20T04:21:23+08:00">
                2016-10-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/网页/" itemprop="url" rel="index">
                    <span itemprop="name">网页</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="什么是主题感"><a href="#什么是主题感" class="headerlink" title="什么是主题感"></a>什么是主题感</h1><p>什么是主题感？主题感就是对WordPress主题的一种对于渲染主题的文件以及这些文件在WordPress中的作用的联系。这个现在讲起来很费劲，你也可以在这个入门的结尾中了解到什么是主题感。</p>
<h1 id="主题感并不是对代码囫囵吞枣"><a href="#主题感并不是对代码囫囵吞枣" class="headerlink" title="主题感并不是对代码囫囵吞枣"></a>主题感并不是对代码囫囵吞枣</h1><p>让我们想想数学和对数学的观感。如果你想让一个孩子通过卡片来牢记运算法则，而你却没告诉他为什么答案是这样。那么当他们没有记下答案的时候，小孩子就会问题不知所措。</p>
<p><img src="/wp-content/uploads/2016/10/numbersense1.png" alt="numbersense1"></p>
<p>举个例子，使用卡片来5+2=7是如何运算，这样结合事实的方法能够阐述事实。即使他们没有记下来答案，孩子也可以之后活学活用，来帮助解决他们可能在以后遇到的种种困难。</p>
<h1 id="如何培养我的主题感"><a href="#如何培养我的主题感" class="headerlink" title="如何培养我的主题感"></a>如何培养我的主题感</h1><p>如果你已经看到这里了，你也差不多了。主题感会应用于你正在做的，做出精准而明确的决定的时候。举个例子，如果有人让你去设计一个汽车，你可能立马就知道你的设计中应该包含什么 - 引擎、框架、轮胎、窗户、尾气管等等。你可能不知道他们每个是怎么工作的，但是你一定能够解释，在你的设计中，为什么需要这些东西并且你也可以检查它们的质量 - 对于安全来说至关重要。你的驾龄也会引导你主题感的产生。</p>
<p>当你做以后的主题工程的时候，你也可以使用相似的方法。有一个很常见的问题就是：我应该在我的主题中包含哪些文件？这些文件是干什么的？为什么我会在我的主题中有这一串代码？这串代码从哪来，到哪去？这串代码很落后吗？这串代码值得信任吗？</p>
<p>你不一定要了解每一行PHP代码的运行机理，因为他可能会变化很多次。更为重要的是，和车的设计一样，你一个能够阐述一个对你主题要做什么的宏观的理解。</p>
<p>这也就是说，你一个在培养宏观的感官中，做了下面事情之后，你的主题感就会更为敏锐。</p>
<h1 id="知道WordPress的一些新鲜事"><a href="#知道WordPress的一些新鲜事" class="headerlink" title="知道WordPress的一些新鲜事"></a>知道WordPress的一些新鲜事</h1><p>WordPress的代码都是在网站中随处可见，其甚至可以在离线，书本和杂志中见到。当你仰望星空的时候，你知道他们已经存在千年。同样的，当你检查一个WordPress代码样本的时候，那也仅仅是WordPress的惊鸿一瞥，并且也不一定是WordPress所必要的。</p>
<p>掌握WordPress的最新最新版本和主要新特性，你就能够很好的预估WordPress入门和插件的走向。为了跟上WordPress的步伐，你可以订阅<a href="http://wordpress.org/news/" target="_blank" rel="external">WordPress新闻博客</a>。</p>
<h1 id="把检查日期当作一种习惯"><a href="#把检查日期当作一种习惯" class="headerlink" title="把检查日期当作一种习惯"></a>把检查日期当作一种习惯</h1><p>在看入门或者书本之前，你都必须首先检查其发布的时间。为什么知道WordPress更新了什么这么重要？因为这回帮助我们评估入门中的哪些部分还能够抓住时间的尾巴，并且仍能够对于现在的主题饭否。你可能知道，在主题中使用过时的代码是很危险的，因为黑客可以轻易的把代码的漏洞给挖出来。</p>
<p>如果你在主题中使用了过时的代码，这也并不是世界末日。有些插件，比如<a href="http://wordpress.org/extend/plugins/developer/" target="_blank" rel="external">Developer</a>和<a href="http://wordpress.org/extend/plugins/theme-check/" target="_blank" rel="external">Theme-Check</a>就能够帮助你优化你WordPress主题的开发环境并且扫描你现在的主题代码。</p>
<p>对于开发者插件而言，养成符合安全规范<a href="http://codex.wordpress.org/Theme_Review#Theme_Settings_and_Data_Security" target="_blank" rel="external">listed in the Theme Security and Privacy Guidelines</a>的习惯是非常好的。这个规范也可以在WordPress Codex中看到。查看这个列表，你可以找到你正在使用特性的参考。举个例子，关于<a href="http://codex.wordpress.org/Data_Validation" target="_blank" rel="external">数据验证和检查</a>对于防止站点受到<a href="http://en.wikipedia.org/wiki/Cross-site_scripting" target="_blank" rel="external">XSS</a>攻击来说，非常有用。</p>
<p>当我们提及代码相关和及时性，我认为在列表中的第二项的原则是非常恰当的。</p>
<blockquote>
<p>主题应该显示的执行主题选项以及设定而不是直接把结果硬编码到网站之中。</p>
</blockquote>
<p>复制粘贴代码可能很快，但是这个方法不仅仅应用在了主题选项代码里了，同样的其不可以被其他人所更改。我指示想让你知道代码的及时性以及安全性的重要。</p>
<h1 id="对于WordPress主题的一些必需元素的理解"><a href="#对于WordPress主题的一些必需元素的理解" class="headerlink" title="对于WordPress主题的一些必需元素的理解"></a>对于WordPress主题的一些必需元素的理解</h1><p>大多数网站，不管是运行着WordPress还是没有，都通常由下面的部分构成：页头，主要区域，侧边栏和页脚。如果你把这些想象成一个组件，那对于你的理解来说是大有裨益的。对于一些块，比如页头，页脚，主要内容和侧边栏，你可能会在你开发的每个主题之中都会遇见。你要做的仅仅是根据用户的需求把他们粘到一起。和WordPress的主题类似，一些诸如header.php、index.php、sidebar.php和footer.php都是块，因此，主题实际上就是一个你针对这些块勾践的一个完整的结构。</p>
<p>了解到这些必要的元素之后，我们就能够更好的培养这些感觉。如果你想快速查阅WordPress的类的话，你可以查看<a href="http://codex.wordpress.org/Theme_Development#Template_Files" target="_blank" rel="external"> The Theme Development page on the WordPress Codex</a></p>
<h1 id="知道哪里能找到最新的代码标准和样例"><a href="#知道哪里能找到最新的代码标准和样例" class="headerlink" title="知道哪里能找到最新的代码标准和样例"></a>知道哪里能找到最新的代码标准和样例</h1><p><a href="WordPress.org Codex">http://codex.wordpress.org</a>是一个研究WordPresshan函数和模板标签很好的起点。如果一个函数被废弃了，Codex页面上就会标记并且告诉你可以替换的函数。你也可以在<a href="http://codex.wordpress.org/Category:Deprecated_Functions" target="_blank" rel="external">这个清单</a>里找到所有被废弃的函数。</p>
<p>WordPress主题审核团队有一系列的审核标准，这个标准确保了所有的主题都应该符合。这样就可以被WordPress.org买南非主题目录所收录。把你的代码和这些标准比对能帮助你保持最佳的体验。</p>
<p>最后，当你对某些事情感到困惑，你可以上一些地方提问，比如<a href="http://wordpress.org/support/forum/themes-and-templates" target="_blank" rel="external">Themes &amp; Templates</a>。如果你更倾向于实时聊天，那么在irc.freenode.net上#wordpress的频道里，你也可以获得帮助。</p>
<p>当然，这也不是说在构建主题的时候，你必须墨守成规。反而，能够了解到你正在做的决定以及你为什么这么做是很机智的。</p>
<h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>这里你需要注意的点有：</p>
<ul>
<li>注意wordpress现在的情况</li>
<li>知道最新版本的wordpress引入了哪些新特性</li>
<li>注意所有wordpress教程的时间。把他和wordpress新特性的特征结合起来就能估计任何教程的相关性</li>
<li>理解代码迭代很快，但是基础的组成件几乎是一成不变的</li>
<li>知道最新的标准，这也能在评估教程的相关性时也很重要</li>
<li>知道你为什么做出这个决定，举个例子，每个模板文件是干什么的？如果你正要粘贴来自Google搜索的一大段代码的话，你是否知道这串代码在做什么？和现在的版本相容吗？及时吗？安全吗？你当然没有必要记下PHP代码中的每一行。因为你能够在宏观层次上架构你的代码才是更难得的。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kidozh.github.io/2016/10/19/e5-88-9b-e5-bb-ba-e4-b8-80-e4-b8-aawordpress-e4-b8-bb-e9-a2-98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kido zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kidozh">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/19/e5-88-9b-e5-bb-ba-e4-b8-80-e4-b8-aawordpress-e4-b8-bb-e9-a2-98/" itemprop="url">创建一个WordPress主题</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-19T21:54:23+08:00">
                2016-10-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/网页/" itemprop="url" rel="index">
                    <span itemprop="name">网页</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="来源"><a href="#来源" class="headerlink" title="来源"></a>来源</h1><p>翻译自<a href="https://themeshaper.com/2012/10/22/the-themeshaper-wordpress-theme-tutorial-2nd-edition/" target="_blank" rel="external">https://themeshaper.com/2012/10/22/the-themeshaper-wordpress-theme-tutorial-2nd-edition/</a></p>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在仅仅的16个课程里，这个WordPress主题知道将会告诉你如何开始构建一个强大而与时俱进的WordPress主题。在接下来的课程之中，我会解释一些或好或坏的我对于一些特定技术的理解以及我选择某项技术的原因。更为重要的是，我会告诉你一切和WordPress主题开发相关的任何事情。</p>
<p>在这个入门之中，你能够随心所欲的开发WordPress了。</p>
<p><img src="/wp-content/uploads/2016/10/theme-shaper-cloud1.png" alt="theme-shaper-cloud1"></p>
<h1 id="下划线-s-的开始主题的入门"><a href="#下划线-s-的开始主题的入门" class="headerlink" title="下划线(_s)的开始主题的入门"></a>下划线(_s)的开始主题的入门</h1><p>如果你还没有听说过<code>_s</code>，简而言之，这是一个100%的GPL，由社区开发的开始主题。这个主题包含了一些现代化的模板，初学者的CSS和一个组织良好的文件结构。这意味着，你所需要做的就只是从头开始设计。你也可以使用<code>_s</code>作为你将来主题开发大厦的一块奠基石。如果你想了解更多<code>_s</code>背后的故事，你也可以花些时间来看看<a href="https://themeshaper.com/2012/02/13/introducing-the-underscores-theme/" target="_blank" rel="external">A 1000-Hour Head Start: Introducing the _s Theme.</a></p>
<p>我们将要在这个入门里将会构建一个很简单的主题，<a href="https://themeshaper.files.wordpress.com/2014/03/shape1.zip" target="_blank" rel="external">shape</a>（这个主题在入门的第一版里被提到了，现在他会为第二版做出一些更新），这个主题也基于<code>_s</code>。如果你想看我们将来要完成的代码，那么不妨下载并且略观一二。在我们学习CSS的课程之前，显然这是比较乏力的。但是如果你想看看我们最终创建shape这个主题的设计思路的话，你就可以<a href="https://themeshaper.files.wordpress.com/2013/10/shape-sample-style.zip" target="_blank" rel="external">点这里</a>了。</p>
<h2 id="历史的一些包袱"><a href="#历史的一些包袱" class="headerlink" title="历史的一些包袱"></a>历史的一些包袱</h2><p>如果你阅读了这篇第一版的入门指南，那么我会告诉你，第一版中的代码有些已经过时了。但这还好，因为更重要的事情就是你能够理解一些很宽泛的概念，这也是为什么他们仍在这里抛头露面的原因。同样的，你也可以在这里获得一份关于<a href="https://github.com/automattic/_s" target="_blank" rel="external"> the latest _s source code from the GitHub repository</a>的复印件。</p>
<p>下面是一些你可能会涉及到关于主题的内容：</p>
<ul>
<li>一个良好组织并且模块化的文件结构</li>
<li>一些实用的针对搜索引擎的优化</li>
<li>谷歌支持的<a href="http://google.com/support/webmasters/bin/answer.py?answer=146897" target="_blank" rel="external">Microformat</a>的语义</li>
<li>有效并且具有逻辑的语义标记结构，这个结构能够创建ANY布局</li>
<li>智能的CSS布局</li>
<li>支持本地化：支持翻译以及从右到左的层叠表</li>
<li>动态的主体，文章和评论CSS类</li>
<li>分离的回溯和评论系统</li>
<li>两个小工具区域，第一个是默认的小工具，第二个当其为空的时候就会消失</li>
<li>对于<code>Aside</code>投稿格式的支持（在这个教程节数之后，你就能够轻松的对更多博客格式给予支持）</li>
<li>一个自定义的目录，弹性的自定义头图片和一个自定义的背景</li>
<li>一个简单的响应式样式，包括一个对移动设备轻量化的导航菜单</li>
<li>还有你想获得的所有WordPress的资料</li>
</ul>
<p>我认为对任何WordPress主题这也是重要的。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kidozh.github.io/2016/10/18/亚琛之行/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kido zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kidozh">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/18/亚琛之行/" itemprop="url">亚琛之行</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-18T21:43:34+08:00">
                2016-10-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/未分类/" itemprop="url" rel="index">
                    <span itemprop="name">未分类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>来了德国这么久，似乎啥也不发确实过意不去，但是最近一直忙于找房子和复杂的思乡情绪，感觉有时候很不正经，一点也不符合我逗逼的定位。</p>
<h1 id="离别前夕"><a href="#离别前夕" class="headerlink" title="离别前夕"></a>离别前夕</h1><p>悄悄总是离别的笙箫，夏虫也为我沉默，沉默是今晚的康桥。那一天，正如再别康桥所云，我仿佛除了沉默再也找不到第二个词来形容我的临别之夜。我心中既感到初秋夏老虎的激情澎湃，也体味到北风掠过的习习凉意。我很高兴，出国留学毕竟是我人生中的头一遭，但是每当想到要离开学校，需要在异乡过完这半年，我怎么也没有办法笑出声。</p>
<p>就好像第一次离开3509一样，我的内心亦如这般。在高中分道扬镳之时，我仍记得那个宁静的夏天，那个嘈杂的街道，我站在原地，目送同学前往孝感。那辆车就好像东流的长江水，终究没有回头。好似命运的荒谬，如今这个场景又原封不动的搬来了西安，只是，我也得一尝久别家乡，远征求学的路。</p>
<h1 id="人在旅途"><a href="#人在旅途" class="headerlink" title="人在旅途"></a>人在旅途</h1><p>有人说，人生就像心电图，一帆风顺就证明你挂了。自然，这个吊诡般的诅咒也少不了眷顾我。下了高铁就漫无目的的在北京的大街上等待另一个同学办理业务，我的心中无疑是沉重的。火车站和机场没有十里长亭，也没有弱风扶柳，但总在临走的时候，火车的鸣笛和飞机升空时的颠簸总是很拙劣的使人哭的一本正经。自然在西安北站，一看到列车缓缓驶出火车站，仿佛我的思想情绪就在这一刻骤然被挑起了最深沉的哀思。家乡总是温柔的，家乡总是深沉的，家乡在这个时候也总是最心痛的。我在此刻凝视着窗外奔驰而过的风景，仿佛要握紧他们的双手，但是终究列车像闪电驶过这片澎湃的土地，我似乎除了回忆，孑然一身。</p>
<p>列车到达北京西，嘈杂的人群汹涌的从我身边穿过，整个车站就好像发了大水一样，人流掐着出口的大门，呜呜咽咽的灌向了出站大楼。我被裹挟着深一脚浅一脚的出了站。</p>
<p>初秋的北京，澄澈的天空上布满了如丝如絮的云朵，太阳耷拉着脸孤悬在光明中。大街上的人群从四面八方来来去去</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kidozh.github.io/2016/10/17/dpkg-e5-a4-84-e7-90-86-xxx-configure-e6-97-b6-e5-87-ba-e9-94-99-e8-a7-a3-e5-86-b3-e5-8a-9e-e6-b3-95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kido zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kidozh">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/17/dpkg-e5-a4-84-e7-90-86-xxx-configure-e6-97-b6-e5-87-ba-e9-94-99-e8-a7-a3-e5-86-b3-e5-8a-9e-e6-b3-95/" itemprop="url">dpkg:处理 xxx (--configure)时出错解决办法</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-17T04:26:08+08:00">
                2016-10-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ubuntu/" itemprop="url" rel="index">
                    <span itemprop="name">Ubuntu</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>安装java的时候出现：dpkg:处理 oracle-java7-installer (–configure)时出错: 子进程 已安装 post-ins，</p>
<p>然后在网上找到了这片文章，按步骤走就解决了，中间会提示自动卸载一下，执行那个命令就好了，</p>
<p>我遇到的情况是在ubuntu上使用apt-get安装软件的时候出现如下错误:</p>
<figure class="highlight plain"><figcaption><span>nfs-common (1:1.2.2-4ubuntu5) ...</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">dpkg：处理 nfs-common (--configure)时出错：</div><div class="line"> 子进程 已安装 post-installation 脚本 返回了错误号 10</div><div class="line">正在设置 samba-common (2:3.5.8~dfsg-1ubuntu2.3) ...</div><div class="line">dpkg：处理 samba-common (--configure)时出错：</div><div class="line"> 子进程 已安装 post-installation 脚本 返回了错误号 10</div><div class="line">dpkg：依赖关系问题使得 samba 的配置工作不能继续：</div><div class="line"> samba 依赖于 samba-common (= 2:3.5.8~dfsg-1ubuntu2.3)；然而：</div><div class="line">  软件包 samba-common 尚未配置。</div><div class="line">dpkg：处理 samba (--configure)时出错：</div><div class="line"> 依赖关系问题 - 仍未被配置</div><div class="line">dpkg：依赖关系问题使得 smbclient 的配置工作不能继续：</div><div class="line"> smbclient 依赖于 samba-common (= 2:3.5.8~dfsg-1ubuntu2.3)；然而：</div><div class="line">  软件包 samba-common 尚未配置。</div><div class="line">dpkg：处理 smbclient (--configure)时出错：</div><div class="line"> 依赖关系问题 - 仍未被配置</div><div class="line">因为错误消息指示这是由于上一个问题导致的错误，没有写入 apport 报告。</div><div class="line">                                                          由于已经达到 MaxReports 限制，没有写入 apport 报告。</div><div class="line">                                        在处理时有错误发生：</div><div class="line"> nfs-common</div><div class="line"> samba-common</div><div class="line"> samba</div><div class="line"> smbclient</div><div class="line">E: Sub-process /usr/bin/dpkg returned an error code (1)</div></pre></td></tr></table></figure>
<h1 id="处理方法"><a href="#处理方法" class="headerlink" title="处理方法"></a>处理方法</h1><ol>
<li><code>sudo mv /var/lib/dpkg/info /var/lib/dpkg/info_old</code> //现将info文件夹更名</li>
<li><code>sudo mkdir /var/lib/dpkg/info</code> //再新建一个新的info文件夹</li>
<li><code>sudo apt-get update</code></li>
<li><code>sudo apt-get -f install</code></li>
<li><code>sudo mv /var/lib/dpkg/info/* /var/lib/dpkg/info_old</code> //执行完上一步操作后会在新的info文件夹下生成一些文件，现将这些文件全部移到info_old文件夹下</li>
<li><code>sudo rm -rf /var/lib/dpkg/info</code> //把自己新建的info文件夹删掉</li>
<li><code>sudo mv /var/lib/dpkg/info_old /var/lib/dpkg/info</code> //把以前的info文件夹重新改回名字</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kidozh.github.io/2016/10/16/e5-9c-a8ubuntu-e4-b8-8a-e8-a3-85nginxmysql-e5-92-8cphp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kido zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kidozh">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/16/e5-9c-a8ubuntu-e4-b8-8a-e8-a3-85nginxmysql-e5-92-8cphp/" itemprop="url">在Ubuntu上装Nginx，MySQL和PHP</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-16T21:34:04+08:00">
                2016-10-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ubuntu/" itemprop="url" rel="index">
                    <span itemprop="name">Ubuntu</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>最近倒腾tornado以及这个网站从SAE迁回了腾讯云，花了不少时间和nginx打交道。所以准备记录一下我怎么倒腾Nginx的过程。（同时控诉一下Apache2的恶心）</p>
<h1 id="安装Nginx服务器"><a href="#安装Nginx服务器" class="headerlink" title="安装Nginx服务器"></a>安装Nginx服务器</h1><p>为了展现一个动态网页，我们现在就部署Nginx，Nginx是一款现代和高效的网络服务器。</p>
<p>下面所有的命令都是基于Ubuntu自带的默认源，也就是说，你只需要巧妙的使用<code>apt</code>来安装就可以了。</p>
<p>因为我们这是第一次使用apt来安装，所以我们需要先更新源。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get update</div><div class="line">sudo apt-get install nginx</div></pre></td></tr></table></figure>
<p>在Ubuntu 14.04这个版本里，Nginx会根据安装时候的配置来决定启动方式。</p>
<p>你可以直接通过访问IP或者域名来观察Nginx是否启动完毕了。</p>
<p>如果你不知道的话，很简单，运行下面的命令就可以知道自己服务器公共的IP地址了。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ip addr show eth0 | grep inet | awk <span class="string">'&#123; print $2; &#125;'</span> | sed <span class="string">'s/\/.*$//'</span></div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">111.111.111.111</div><div class="line">fe80::601:17ff:fe61:9801</div></pre></td></tr></table></figure>
<p>或者你觉得麻烦，这样也可以：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl http://icanhazip.com</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">111.111.111.111</div></pre></td></tr></table></figure>
<p>这样就知道了地址。这里由于我在的RWTH-Aachen屏蔽了这个网站，所以就查不到，具体情况你可以联系网管。</p>
<p>直接输入IP或者域名。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://server_domain_name_or_IP</div></pre></td></tr></table></figure>
<p><img src="/wp-content/uploads/2016/10/nginx_default.png" alt="nginx_default"></p>
<p>如果你看到了Nginx的欢迎页面，那么恭喜您，Ngnix就装好了。</p>
<h1 id="安装MySQL来储存数据"><a href="#安装MySQL来储存数据" class="headerlink" title="安装MySQL来储存数据"></a>安装MySQL来储存数据</h1><p>现在我们已经安装好了网络服务器了，那么我们就需要一个数据库来支撑我们整个网站的数据储存业务了。</p>
<p>最简单的就是输入下面的命令：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install mysql-server</div></pre></td></tr></table></figure>
<p>在此期间，你会被要求输入一个MySQL管理员的密码。</p>
<p>这样，MySQL就安装好了，但是需要我们来配置。</p>
<p>首先，我们需要让MySQL生成一个可以存储信息和数据结构的目录，我们只需要键入下面的命令：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo mysql_install_db</div></pre></td></tr></table></figure>
<p>接下来，你可以运行一个安全脚本来引导你做一些安全的配置，你需要输入命令：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo mysql_secure_installation</div></pre></td></tr></table></figure>
<p>在这个过程中，你需要在安装过程中提供您MySQL管理员的密码。</p>
<p>接着，他会询问您是否想变更密码，如果您对您现在的MySQL密码很满意的话，输入<code>N</code>然后按下<code>Enter</code>键就可以了，接着，您需要移除测试的数据库和用户。在这个过程中，您只需要一路按<code>Enter</code>来继续就可以了。</p>
<p>一旦脚本跑完了，那么MySQL就对数据饥渴难耐了。</p>
<h1 id="安装PHP"><a href="#安装PHP" class="headerlink" title="安装PHP"></a>安装PHP</h1><p>现在，我们已经安装好了承载页面的Nginx服务器和存储数据的MySQL数据库，但是我们还是需要一些东西来串接这两个东西并且生成动态界面。这样我们就可以使用PHP来完成这个任务。</p>
<p>因为Nginx和其他服务器不同，其并不包含原生的PHP处理模块，所以我们需要安装<code>php5-fpm</code>（fastCGI process manager）。我们会指定Nginx将PHP请求给这个软件用于处理。</p>
<p>我们可以安装这个模块并且还需要一个安装一个能够让PHP和我们后台数据库交互的包。这次安装会放入所有必要的PHP核心文件。你需要键入：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install php5-fpm php5-mysql</div></pre></td></tr></table></figure>
<h2 id="配置PHP处理模块"><a href="#配置PHP处理模块" class="headerlink" title="配置PHP处理模块"></a>配置PHP处理模块</h2><p>现在我们已经安装了PHP，但是我们还是要做一些细微的调整来让我们的安装更为安全。</p>
<p>使用root权限来打开<code>php5-fpm</code>的配置文件：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo vim /etc/php5/fpm/php.ini</div></pre></td></tr></table></figure>
<p>在这个文件中，我们找到第一个参数<code>cgi.fix_pathinfo</code>，这个被一个<code>;</code>所注释掉，并且默认设置为1。</p>
<p>这个是一个非常危险的设定，因为其告诉PHP对于那些没有办法完全匹配的请求执行最为接近的文件。这样就可能使得用户能够执行一些他们并不能被允许执行的脚本。</p>
<p>我们就需要关闭这个设定：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cgi.fix_pathinfo=0</div></pre></td></tr></table></figure>
<p>保存这个文件，并且完成设定。</p>
<p>现在，我们就需要重启我们的PHP处理器：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo service php5-fpm restart</div></pre></td></tr></table></figure>
<p>这样我们的设定就会应用了。</p>
<h1 id="配置Nginx使用我们的PHP处理器"><a href="#配置Nginx使用我们的PHP处理器" class="headerlink" title="配置Nginx使用我们的PHP处理器"></a>配置Nginx使用我们的PHP处理器</h1><p>现在，我们啥都安装好了，现在我们唯一要做的就是配置Nginx来使用我们的PHP来处理动态界面。</p>
<p>我们需要在服务器层次上配置。如果我们想要Nginx默认的话，只需要这样：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo vim /etc/nginx/sites-available/default</div></pre></td></tr></table></figure>
<p>移除掉注释之后，整个文件就会像这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen 80 default_server;</div><div class="line">    listen [::]:80 default_server ipv6only=on;</div><div class="line"></div><div class="line">    root /usr/share/nginx/html;</div><div class="line">    index index.html index.htm;</div><div class="line"></div><div class="line">    server_name localhost;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        try_files $uri $uri/ =404;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当然，我们需要为我们的网站做一些细微的调整：</p>
<ul>
<li>首先，我们需要添加一个<code>index.php</code>的选项来置于我们索引页。这样当处理一些针对目录的请求的时候，就会自动寻找这个目录下的<code>index.php</code>文件来加载动态页面。</li>
<li>我们同样需要修改server_name来指出我们服务器的域名或者是IP地址</li>
<li>事实上，一些配置文件有一些被注释掉的定义处理错误行为的函数，我们需要消掉这些注释，以便于我们能够支持这些行为。</li>
<li>对于每一个PHP的请求，我们需要消掉其他的部分的注释。并且我们还需要添加<code>add_files</code>来使得我们的Nginx不会向PHP处理器传递太多的错误请求。</li>
</ul>
<p>所以说，现在我们要变成这样（注意高亮）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen 80 default_server;</div><div class="line">    listen [::]:80 default_server ipv6only=on;</div><div class="line"></div><div class="line">    root /usr/share/nginx/html;</div><div class="line">    index index.php index.html index.htm;</div><div class="line"></div><div class="line">    server_name server_domain_name_or_IP;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        try_files $uri $uri/ =404;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    error_page 404 /404.html;</div><div class="line">    error_page 500 502 503 504 /50x.html;</div><div class="line">    location = /50x.html &#123;</div><div class="line">        root /usr/share/nginx/html;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    location ~ \.php$ &#123;</div><div class="line">        try_files $uri =404;</div><div class="line">        fastcgi_split_path_info ^(.+\.php)(/.+)$;</div><div class="line">        fastcgi_pass unix:/var/run/php5-fpm.sock;</div><div class="line">        fastcgi_index index.php;</div><div class="line">        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</div><div class="line">        include fastcgi_params;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当修改好了之后，你就可以保存文件了。</p>
<p>然后重启Nginx服务器：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo service nginx restart</div></pre></td></tr></table></figure>
<h1 id="创建一个PHP文件来测试配置"><a href="#创建一个PHP文件来测试配置" class="headerlink" title="创建一个PHP文件来测试配置"></a>创建一个PHP文件来测试配置</h1><p>你的LEMP环境就这样被配置好了，但是我们还是要测试来确保Nginx能够正确的处理<code>.php</code>文件。</p>
<p>就上面所述，我们可以直接在文件夹中创建一个PHP文件。打开一个名为info.php的新文件。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo vim /usr/share/nginx/html/info.php</div></pre></td></tr></table></figure>
<p>我们可以把下面的内容键入到文件之中，这个有效的PHP代码就能够反映我们服务器的一些情况。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">phpinfo();</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>保存并且关闭文件。</p>
<p>现在你可以在浏览器中访问这个界面：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://server_domain_name_or_IP/info.php</div></pre></td></tr></table></figure>
<p>这样你就可以看见一个被PHP创建的反映你情况的界面。</p>
<p><img src="/wp-content/uploads/2016/10/php_info.png" alt="php_info"></p>
<p>如果你看见了一个像这样的页面，那么你的Nginx的PHP环境就配置完毕了。</p>
<p>接着，为了防止我们信息的泄露，删除这个文件就可以了。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo rm /usr/share/nginx/html/info.php</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kidozh.github.io/2016/10/12/python-configparser-e9-85-8d-e7-bd-ae-e6-96-87-e4-bb-b6-e8-a7-a3-e6-9e-90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kido zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kidozh">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/12/python-configparser-e9-85-8d-e7-bd-ae-e6-96-87-e4-bb-b6-e8-a7-a3-e6-9e-90/" itemprop="url">python ConfigParser – 配置文件解析</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-12T23:33:05+08:00">
                2016-10-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ConfigParser该模块定义了ConfigParser类，该类实现了基本的配置文件的解析，配置文件提供了类似与 WINDOWS下的INI文件结构。你可以使用该类编写最终用户很容易自定义的Python程序。</p>
<p>警告：该库不包括值类型前缀，该前缀应用与INI语法的扩展版本—Windows Registry中。</p>
<p>例如：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[My Section] </div><div class="line">foodir: %(dir)s/whatever </div><div class="line">dir=frob</div></pre></td></tr></table></figure>
<p>将会解析“<code>%(dir)s</code>”为“<code>dir</code>”的值（这里是“<code>frob</code>”）。该模块包含所以需要的扩展。</p>
<p>默认值可以通过他们作为字典传递给<code>ConfigParser</code>构造器来知道，另外还会默认传递给<code>get()</code>方法，它会覆盖其他所以方法。</p>
<p>Class RawConfigParser([defaults]) </p>
<p>基本配置类，当传递defaults时，会初始化到内置字典中。该类不支持智能修复，2.3版本新特征。</p>
<p>Class ConfigParser([defaults])</p>
<p>继承之RawConfigParser类，实现了智能特性，为get(),items()方法添加了可选参数。Defaults中的值必须能填补“%()s”。注意<strong>name</strong>是内置的default；该值是section的名称，它会被defaults提供的任何值所覆盖。</p>
<p>所以的用于填补的option名称都会通过optionxform()方法传递，就像其他任何option名称一样。例如，使用optionxform()的默认实现（将option名称转化成小写），“foo %(bar)s”和“foo %(BAR)s”的值相等。</p>
<p>Class SafeConfigParser([defaults]) </p>
<p>继承至ConfigParser，实现了更多智能特征，实现更有可预见性，新的应用更偏好这个版本，如果他们不需要对python老版本的兼容性，2.3版本。</p>
<p>Exception NoSectionError </p>
<p>当没有发现给定section时抛出。</p>
<p>Exception DuplicateSectionError </p>
<p>如果add_section()方法被调用时，提供的section参数的值已经存在时抛出。</p>
<p>Exception NoOptionError </p>
<p>指定option不存在时抛出。</p>
<p>Exception InterpolationError </p>
<p>执行字符串填补时抛出的异常的基类。</p>
<p>Exception InterpolationDepthError </p>
<p>当填补字符串因为迭代次数超过了MAX_INTERPOLATION_DEPTH值时抛出的异常，InterpolationError的子类。</p>
<p>Exception InterpolationMissingOptionError </p>
<p>当option引用的值不存在时抛出，该异常为InterpolationError的子类，2.3版本新加。</p>
<p>Exeption InterpolationSyntaxError </p>
<p>当原文件格式没有遵守规定的语法时抛出的异常，继承至InterpolationError，2.3版本。</p>
<p>Exception MissingSectionHeaderError </p>
<p>尝试解析没有section头的文件时抛出。</p>
<p>Exception ParsingError </p>
<p>解析文件时发生错误。</p>
<p>MAX_INTERPOLATION_DEPTH </p>
<p>get()方法当raw参数为false时，递归的对大深度。只适用与ConfigParser类。</p>
<p>RawConfigParser对象 </p>
<p>RawConfigParser实例的方法：</p>
<p>defaults() </p>
<p>返回全部示例中所以defaults。</p>
<p>sections() </p>
<p>返回有效的section列表，DEFAULT不包含在列表中。</p>
<p>add_section(section) </p>
<p>为实例添加一个section，如果给定的section名已经存在，将抛出DuplicateSectionError异常。</p>
<p>has_section(section) </p>
<p>判断给定的section名在配置文件中是否存在，DEFAULT section不包括。</p>
<p>options(section) </p>
<p>返回给定的section下的所有可用option的列表。</p>
<p>has_option(section, option) </p>
<p>如果section存在，并包含给定的option，返回true，放在返回false, 1.6版本新增。</p>
<p>read(filenames) </p>
<p>尝试解析文件列表，如果解析成功返回文件列表。如果filenames是string或Unicode string，将会按单个文件来解析。如果在filenames中的文件不能打开，该文件将被忽略。这样设计的目的是，让你能指定本地有可能是配置文件的列表（例如，当前文件夹，用户的根目录，及一些全系统目录），所以在列表中存在的配置文件都会被读取。如果文件都不存在，那么ConfigParser实例会包含空数据集。一个需要从配置文件读取初始化数据的应用程序，应该使用readfp()方法来加载所需要的文件，之后可以使用read()方法来获取任何可能的文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ConfigParser, os</div><div class="line"></div><div class="line">config = ConfigParser.ConfigParser() </div><div class="line">config.readfp(open(<span class="string">'defaults.cfg'</span>)) </div><div class="line">config.read([<span class="string">'site.cfg'</span>, os.path.expanduser(<span class="string">'~/.myapp.cfg'</span>)])</div></pre></td></tr></table></figure>
<p>2.4版本之后，返回成功解析的文件列表。</p>
<p>readfp(fp[, filename]) </p>
<p>从文件或fp（值使用该对象的readline()方法）中的似文件类读取并解析配置数据，如果filename被省略，fp有一个name属性，该属性用于获取filename；默认是“&lt;???&gt;”。</p>
<p>get(section, option) </p>
<p>获取section下option的值。</p>
<p>getint(section, option) </p>
<p>强制指定section下的option的值，作为Int类型返回的方便方法。</p>
<p>getfloat(section, option) </p>
<p>强制section下的option值，作为float类型返回的方法方法。</p>
<p>getboolean(section, option) </p>
<p>强制section下的option值，作为布尔类型返回的方法方法。注意可接受的option的true值有“1”，“yes”，“true”及“on”，可接受的false值有“0”，“no”，“false”，“off”。字符串值不检测大小写，其他值会抛出ValueError异常。</p>
<p>itmes(section) </p>
<p>返回给定section下的所以option的（name, value）对列表。</p>
<p>set(section, option, value) </p>
<p>如果给定的setion存在，为option设定给定的值；否则抛出NoSectionError异常。当可能使用RawConfigParser（或者ConfigParser的参数raw为true）来在内部存储非字符串值，所以功能（包括填补和输出到文件）只能使用字符串值来归档。1.6版本新增。</p>
<p>write(fileobject) </p>
<p>将配置表示写入指定文件类，该表示以后可以通过调用read()来解析，1.6版本新增。</p>
<p>remove_option(section, option) </p>
<p>从指定section中删除指定option，如果section不存在，抛出NoSectionError异常；如果option存在，则删除，并返回True；否则返回false。1.6版本新增。</p>
<p>remove_section(section) </p>
<p>从配置文件中删除指定的section，如果section确实存在，返回true，否则返回false。</p>
<p>optionxform(option) </p>
<p>将输入文件中，或客户端代码传递的option名转化成内部结构使用的形式。默认实现返回option的小写形式；子类可能重写该方法或客户端代码可能将该方法作为实例的属性，以此来影响它的行为。将此用于str()，例如，会使option名称大小写敏感。</p>
<p>ConfigParser对象 </p>
<p>ConfigParser类扩展了RawConfigParser的一些接口方法，添加了一些可选参数。</p>
<p>get(section, option [, raw[, vars]]) </p>
<p>获取给定section下的option的值，所以“%”占位符在返回值中被填补，基于构造时传递的默认值，就像option，vars也被提供，除非raw参数为true。</p>
<p>items(section, [, raw[, vars]]) </p>
<p>返回给定section下的所以option的（name, value）对列表。可选参数同get方法，2.3版本新增。</p>
<p>SafeConfigParser对象 </p>
<p>SafeConfigParser类实现了ConfigParser相同的接口，新增如下方法：</p>
<p>set(section, option, value) </p>
<p>如果给定的section存在，给option赋值；否则抛出NoSectionError异常。Value值必须是字符串（str或unicode）；如果不是，抛出TypeError异常，2.4版本新增。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kidozh.github.io/2016/07/30/python-e8-af-bb-e5-8f-96-e7-bd-91-e9-a1-b5-e4-ba-a7-e7-94-9f-e7-9a-84octet-stream-e6-96-87-e4-bb-b6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kido zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kidozh">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/30/python-e8-af-bb-e5-8f-96-e7-bd-91-e9-a1-b5-e4-ba-a7-e7-94-9f-e7-9a-84octet-stream-e6-96-87-e4-bb-b6/" itemprop="url">python读取网页产生的octet-stream文件</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-07-30T00:36:12+08:00">
                2016-07-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在爬取Vjudge的导出代码的时候，之前我们采用的是纯正则一个个抓取，速度很慢，当时Vjudge官方向我们提供了一种解决方法就是从URL中获得比赛源代码。</p>
<h1 id="获得验证"><a href="#获得验证" class="headerlink" title="获得验证"></a>获得验证</h1><p>众所周知，Vjudge获取比赛源代码需要登陆拉题人的账号密码，所以我使用了<code>Request</code>这个库来处理含有cookie的请求。所以首先需要模拟登陆这个过程：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">(self,username=None,password=None)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment">#username = raw_input('Your username : ')</span></div><div class="line">        <span class="comment">#password = raw_input('Your password : ')</span></div><div class="line">        <span class="comment">#username = 'ArrowLLL'</span></div><div class="line">        <span class="comment">#password = 'lll1314'</span></div><div class="line">        VJheaders = &#123;</div><div class="line">            <span class="string">'Host'</span>:<span class="string">'acm.hust.edu.cn'</span>,</div><div class="line">            <span class="string">'User-Agent'</span>:<span class="string">'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:47.0) Gecko/20100101 Firefox/47.0'</span>,</div><div class="line">            <span class="string">'Accept'</span>:<span class="string">'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'</span>,</div><div class="line">            <span class="string">'Accept-Language'</span>:<span class="string">'en-US,en;q=0.5'</span>,</div><div class="line">            <span class="string">'Accept-Encoding'</span>:<span class="string">'deflate'</span>,</div><div class="line">            <span class="comment">#'Cookie':'ga=GA1.3.1416134436.1469179876',</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        postData = &#123;</div><div class="line">            <span class="string">'username'</span>:username,</div><div class="line">            <span class="string">'password'</span>:password</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        postData = urllib.urlencode(postData)</div><div class="line">        <span class="keyword">print</span> postData</div><div class="line">        req = urllib2.Request(</div><div class="line">            <span class="comment">#url = 'http://acm.hust.edu.cn/vjudge/contest/fetchStatus.action?cid=88638',</span></div><div class="line">            url=<span class="string">'http://acm.hust.edu.cn/vjudge/user/login'</span>,</div><div class="line">            headers=VJheaders,</div><div class="line">            data=postData</div><div class="line">        )</div><div class="line">        res = self.opener.open(req).read()</div><div class="line">        <span class="keyword">print</span> res</div><div class="line">        <span class="keyword">if</span> res == <span class="string">'"success"'</span>:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">False</span></div></pre></td></tr></table></figure>
<h1 id="获得流"><a href="#获得流" class="headerlink" title="获得流"></a>获得流</h1><p>下一步是爬虫中常见的，使用<code>opener.open</code>来访问这个URL并且获得结果，需要注意的是，这个过程需要带一个合适的<code>header</code>。</p>
<p>接着我从浏览器中发现其<code>Content-Type</code>为<code>application/octet-stream</code>，而<code>request</code>返回的数据中<code>fp</code>正是<code>CStringIO</code>类型，所以我们需要通过这个数据结构来获得我们需要的文件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">getExportedSourceCode</span><span class="params">(self,cid=<span class="string">'121125'</span>)</span>:</span></div><div class="line">        VJheaders = &#123;</div><div class="line">            <span class="string">'Host'</span>:<span class="string">'acm.hust.edu.cn'</span>,</div><div class="line">            <span class="string">'User-Agent'</span>:<span class="string">'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:47.0) Gecko/20100101 Firefox/47.0'</span>,</div><div class="line">            <span class="string">'Accept'</span>:<span class="string">'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'</span>,</div><div class="line">            <span class="string">'Accept-Language'</span>:<span class="string">'en-US,en;q=0.5'</span>,</div><div class="line">            <span class="string">'Accept-Encoding'</span>:<span class="string">'deflate'</span>,</div><div class="line">            <span class="comment">#'Cookie':'ga=GA1.3.1416134436.1469179876',</span></div><div class="line">        &#125;</div><div class="line">        exportUrl =<span class="string">'http://acm.hust.edu.cn/vjudge/contest/exportSource/%s'</span>%cid</div><div class="line">        tarReq= urllib2.Request(</div><div class="line">            <span class="comment">#url = 'http://acm.hust.edu.cn/vjudge/contest/fetchStatus.action?cid=88638',</span></div><div class="line">            url=exportUrl,</div><div class="line">            headers=VJheaders,</div><div class="line">            <span class="comment">#data=postData</span></div><div class="line">        )</div><div class="line">        res = self.opener.open(tarReq)</div><div class="line">        f = cStringIO.StringIO(res.read())</div><div class="line">        <span class="comment">#f.read()</span></div><div class="line">        now = datetime.datetime.now()</div><div class="line">        tarName =<span class="string">'%s%s.zip'</span> %(now.strftime(<span class="string">'%Y-%m-%d'</span>),cid)</div><div class="line">        <span class="comment">#print '#',res.fp,res.code</span></div><div class="line">        <span class="keyword">with</span> open(tarName,<span class="string">'wb'</span>) <span class="keyword">as</span> tarFile:</div><div class="line">            tarFile.write(f.read())</div><div class="line">        <span class="keyword">print</span> <span class="string">'TAR File has been Downloaded..'</span></div></pre></td></tr></table></figure>
<p>这样就能够正确的把导出的zip文件存储到本地磁盘之中了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="kido zhang" />
          <p class="site-author-name" itemprop="name">kido zhang</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">112</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">19</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">78</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/kidozh" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/331837926Ji" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                    
                      Twitter
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/kidozh" target="_blank" title="weibo">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      weibo
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://douban.com/people/kidozh" target="_blank" title="douban">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      douban
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.zhihu.com/people/kidozh" target="_blank" title="zhihu">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      zhihu
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2014 &mdash; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">kido zhang</span>

  
</div>


  <div class="powered-by">
    由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
  </div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">
    主题 &mdash;
    <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
      NexT.Pisces
    </a>
  </div>


        







        
      </div>
    </footer>

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  


  

  

</body>
</html>
